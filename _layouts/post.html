---
layout: base
---

{% assign article_color = page.color | default: '#00CFFF' %}

<article class="post" style="--article-color: {{ article_color }}">

  <!-- Hero Section with Cover Image -->
  <header class="post-hero">
    {% if page.cover %}
    <div class="post-hero-image" style="background-image: url('{{ page.cover | relative_url }}')">
      <div class="post-hero-overlay"></div>
    </div>
    {% endif %}

    <div class="post-hero-content">
      <div class="post-meta-top">
        {% if page.tags %}
        <div class="post-tags">
          {% for tag in page.tags %}
          <span class="post-tag">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
      </div>

      <h1 class="post-title">{{ page.title }}</h1>

      {% if page.excerpt %}
      <p class="post-excerpt">{{ page.excerpt }}</p>
      {% endif %}

      <div class="post-meta">
        <div class="post-meta-item">
          <svg class="post-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
          <time datetime="{{ page.date | date_to_xmlschema }}">
            {{ page.date | date: "%B %d, %Y" }}
          </time>
        </div>

        {% if page.author %}
        <div class="post-meta-item">
          <svg class="post-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          <span>{{ page.author }}</span>
        </div>
        {% endif %}

        {% if page.reading_time %}
        <div class="post-meta-item">
          <svg class="post-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10" />
            <path d="M12 6v6l4 2" />
          </svg>
          <span>{{ page.reading_time }}</span>
        </div>
        {% endif %}
      </div>
    </div>
  </header>

  <!-- Progress Bar -->
  <div class="post-progress-container">
    <div class="post-progress-bar" id="post-progress"></div>
  </div>

  <!-- Main Content -->
  <div class="post-container">

    <!-- Table of Contents (auto-generated) -->
    {% if page.toc != false %}
    <aside class="post-toc" id="post-toc">
      <div class="post-toc-header">
        <h3>Contents</h3>
      </div>
      <nav class="post-toc-nav">
        <!-- Generated by JavaScript -->
      </nav>
    </aside>
    {% endif %}

    <!-- Article Content -->
    <div class="post-content">
      {{ content }}

      <!-- Author Bio (if provided) -->
      {% if page.author_bio %}
      <div class="post-author-bio">
        <h3>About the Author</h3>
        <p>{{ page.author_bio }}</p>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Related Articles -->
{% if site.articles.size > 1 %}
<section class="post-related">
  <h2>Related Articles</h2>
  <div class="post-related-grid">

    {% assign scored = "" | split: "" %}

    {% for article in site.articles %}
      {% if article.url != page.url %}

        {% assign overlap = 0 %}

        {% for tag in article.tags %}
          {% if page.tags contains tag %}
            {% assign overlap = overlap | plus: 1 %}
          {% endif %}
        {% endfor %}

        {% if overlap > 0 %}
          {% assign padded = overlap | prepend: "000" | slice: -3, 3 %}
          {% assign entry = padded | append: "||" | append: article.url %}
          {% assign scored = scored | push: entry %}
        {% endif %}

      {% endif %}
    {% endfor %}

    {% assign sorted = scored | sort | reverse %}
    {% assign top_matches = sorted | slice: 0, 3 %}

    {% assign used_urls = "" | split: "" %}
    {% for item in top_matches %}
      {% assign parts = item | split: "||" %}
      {% assign url = parts[1] %}
      {% assign article = site.articles | where: "url", url | first %}
      {% assign used_urls = used_urls | push: url %}

      {% include components/card.html
        type="article"
        name=article.title
        image=article.title-image
        date=article.date
        url=article.url
        color=article.color
        excerpt=article.excerpt
        reading_time=article.reading_time
      %}
    {% endfor %}

    {% assign remaining = 3 | minus: top_matches.size %}
    {% if remaining > filler_pool.size %}
      {% assign remaining = filler_pool.size %}
    {% endif %}

    {% if remaining > 0 %}

      {% assign filler_pool = "" | split: "" %}

      {% for article in site.articles %}

        {% if article.url != page.url %}

          {% unless used_urls contains article.url %}
            {% assign filler_pool = filler_pool | push: article %}
          {% endunless %}

        {% endif %}

      {% endfor %}

      {% if remaining == 1 %}
        {% assign single = filler_pool | sample %}
        {% assign random_fillers = "" | split: "" %}
        {% assign random_fillers = random_fillers | push: single %}
      {% else %}
        {% assign random_fillers = filler_pool | sample: remaining %}
      {% endif %}


      {% for article in random_fillers %}
        {% include components/card.html
          type="article"
          name=article.title
          image=article.title-image
          date=article.date
          url=article.url
          color=article.color
          excerpt=article.excerpt
          reading_time=article.reading_time
        %}
      {% endfor %}

    {% endif %}


  </div>
</section>
{% endif %}





  <!-- Back to Articles -->
  <div class="post-back">
    <a href="{{ site.baseurl }}/articles" class="post-back-link">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M19 12H5M12 19l-7-7 7-7" />
      </svg>
      Back to all articles
    </a>
  </div>

</article>

<!-- JavaScript for features -->
<script src="{{ '/js/components/post.js' | relative_url }}"></script>